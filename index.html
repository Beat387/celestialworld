<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celestial World</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#8364e8',
              secondary: '#a892fe'
            },
            borderRadius: {
              'none': '0px',
              'sm': '4px',
              DEFAULT: '8px',
              'md': '12px',
              'lg': '16px',
              'xl': '20px',
              '2xl': '24px',
              '3xl': '32px',
              'full': '9999px',
              'button': '8px'
            }
          }
        }
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css" rel="stylesheet">
    <style>
    /*
        IMPORTANT:
        1. Create an 'images' folder in the root of your project (next to this index.html file).
        2. Download all image assets.
        3. Rename them to the simplified names used in this file (e.g., "hero-background.jpg", "userimg_01.jpg", "contact-header-bg.jpg", "newsletter-bg.jpg", "category-flowers.jpg" etc.).
        4. Place ALL these renamed image files into the 'images' folder.
        5. Ensure filenames and extensions are EXACTLY THE SAME (CASE-SENSITIVE) as referenced in the HTML, CSS, and JavaScript.
    */
    body {
      font-family: 'Inter', sans-serif;
      scroll-behavior: smooth;
      background-color: #f9fafb; /* bg-gray-50 (default) */
      color: #1f2937; /* text-gray-800 */
    }
    /* Header styling classes */
    .glassmorphism-light { /* For homepage initial state */
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    .glassmorphism-dark { /* For contact page scrolled state */
      background: rgba(29, 35, 42, 0.85); /* bg-gray-900/85 or similar dark*/
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .header-bg-dark-scrolled { /* For homepage scrolled state */
        background-color: rgba(29, 35, 42, 0.9); /* bg-gray-900/90 */
        backdrop-filter: blur(10px);
    }

    /* Header Background Image Overlay for non-home pages (Contact, About, etc.) */
    #site-header .header-bg-image-overlay-content {
        position: absolute;
        inset: 0;
        /* background-image is now set by JavaScript below using 'images/hero-background.jpg' */
        background-size: cover;
        background-position: center center;
        z-index: -1; /* Behind header content */
        transition: opacity 0.3s ease-in-out;
    }
    #site-header .header-bg-image-overlay-content::before { /* The dark overlay for the image */
        content: '';
        position: absolute;
        inset: 0;
        background-color: rgba(0,0,0,0.6); /* Adjust darkness as needed */
        z-index: 0; /* On top of image, behind content */
    }

    /* Common input type=search reset */
    input[type="search"]::-webkit-search-decoration,
    input[type="search"]::-webkit-search-cancel-button,
    input[type="search"]::-webkit-search-results-button,
    input[type="search"]::-webkit-search-results-decoration {
      display: none;
    }
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 10000; /* Ensure toast is on top */
      transform: translateY(100px);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* Custom Cursor */
    .custom-cursor {
      position: fixed;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(131, 100, 232, 0.3);
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 99999; /* Ensure cursor is on top */
      transition: width 0.2s, height 0.2s, background 0.2s;
    }
    .custom-cursor.active {
      width: 40px;
      height: 40px;
      background: rgba(131, 100, 232, 0.2);
    }
    @media (max-width: 768px) {
      .custom-cursor {
        display: none;
      }
      .masonry-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
    }

    /* Active Nav Link Styles */
    .nav-link-active {
        color: #8364e8 !important; /* primary color for mobile or default */
        font-weight: 600; /* semibold */
    }
    /* Desktop header active link (especially when over an image/dark bg) */
    #site-header .desktop-nav .nav-link-active {
        color: #a892fe !important; /* secondary or a lighter primary */
    }
    /* Mobile menu active link */
    #mobile-menu nav a.nav-link-active {
        color: #8364e8 !important; /* primary color */
    }

    /* Homepage Specific Styles */
    .hero-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    .particle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      animation: float 8s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
      50% { transform: translateY(-20px) translateX(10px); opacity: 0.8; }
    }
    .category-card:hover img {
      transform: scale(1.05);
      transition: transform 0.5s ease;
    }
    .gallery-item:hover .gallery-overlay {
      opacity: 1;
    }
    .masonry-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      grid-auto-rows: auto; /* Allow items to have their natural height */
      align-items: start; /* Align items to the start of the grid cell */
      grid-gap: 1.5rem; /* Equivalent to gap-6 */
    }
    .custom-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }
    .custom-switch input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
      background-color: #e2e8f0; transition: .4s; border-radius: 24px;
    }
    .slider:before {
      position: absolute; content: ""; height: 18px; width: 18px;
      left: 3px; bottom: 3px; background-color: white;
      transition: .4s; border-radius: 50%;
    }
    input:checked + .slider { background-color: #8364e8; }
    input:checked + .slider:before { transform: translateX(24px); }

    .image-modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.9); z-index: 9000; /* Below toast and cursor */
      justify-content: center; align-items: center;
    }
    .image-modal.flex { display: flex; }

    #page-content-wrapper.contact-active,
    #page-content-wrapper.about-active,
    #page-content-wrapper.privacy-active,
    #page-content-wrapper.terms-active {
      padding-top: 76px; /* Apply padding only for these pages' main content when header is fixed */
    }
    
    /* Ad Container Styling */
    .gallery-ad-item, .footer-ad-container, .content-ad-container {
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #f0f0f0; /* A light gray background */
        border-radius: 8px;
    }
    .gallery-ad-item {
        /* This ensures the ad takes up grid space without forcing a fixed height */
        align-self: stretch; 
    }
    .gallery-ad-item img, .footer-ad-container img, .content-ad-container img {
        max-width: 100%;
        height: auto;
    }


    </style>
</head>
<body data-page="home"> <div class="custom-cursor"></div>

<header class="fixed w-full z-50 transition-all duration-300" id="site-header">
  <div class="header-bg-image-overlay-content" id="header-bg-overlay-dynamic"></div> <div class="container mx-auto px-4 py-3 relative"> <div class="flex items-center justify-between">
      <a href="index.html" class="flex items-center header-logo-link">
        <span class="text-2xl font-['Pacifico'] text-white">Celestial World</span>
      </a>
      <div class="hidden md:flex items-center space-x-8">
        <nav class="desktop-nav">
          <ul class="flex space-x-6">
            <li><a href="index.html" class="text-white hover:text-primary transition-colors nav-item">Home</a></li>
            <li><a href="#categories" class="text-white hover:text-primary transition-colors nav-item">Categories</a></li>
            <li><a href="#gallery" class="text-white hover:text-primary transition-colors nav-item">Gallery</a></li>
            <li><a href="#about" class="text-white hover:text-primary transition-colors nav-item">About</a></li>
            <li><a href="#contact" class="text-white hover:text-primary transition-colors nav-item">Contact</a></li>
          </ul>
        </nav>
        <div class="relative">
          <input type="search" id="search-input-desktop" placeholder="Search..." class="bg-white/10 border-none rounded-full py-2 pl-10 pr-4 text-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-primary w-48">
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 flex items-center justify-center text-white/70">
            <i class="ri-search-line"></i>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <a href="#" id="header-like-button" class="text-white hover:text-primary transition-colors">
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-heart-line"></i>
            </div>
          </a>
        </div>
      </div>
      <button class="md:hidden text-white w-8 h-8 flex items-center justify-center" id="mobile-menu-button">
        <i class="ri-menu-line ri-lg"></i>
      </button>
    </div>
  </div>
  <div id="mobile-menu" class="hidden md:hidden bg-gray-800/95 backdrop-blur-md">
    <nav class="container mx-auto px-4 py-4">
      <ul class="space-y-4">
        <li><a href="index.html" class="block text-white hover:text-primary transition-colors nav-item">Home</a></li>
        <li><a href="#categories" class="block text-white hover:text-primary transition-colors nav-item">Categories</a></li>
        <li><a href="#gallery" class="block text-white hover:text-primary transition-colors nav-item">Gallery</a></li>
        <li><a href="#about" class="block text-white hover:text-primary transition-colors nav-item">About</a></li>
        <li><a href="#contact" class="block text-white hover:text-primary transition-colors nav-item">Contact</a></li>
      </ul>
      <div class="mt-4 relative">
        <input type="search" id="search-input-mobile" placeholder="Search..." class="bg-white/10 border-none rounded-full py-2 pl-10 pr-4 text-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-primary w-full">
        <div class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 flex items-center justify-center text-white/70">
          <i class="ri-search-line"></i>
        </div>
      </div>
       <div class="flex items-center space-x-4 mt-4">
          <a href="#" id="mobile-like-button" class="text-white hover:text-primary transition-colors">
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-heart-line"></i>
            </div>
              <span class="ml-2">Favorites</span>
          </a>
        </div>
    </nav>
  </div>
</header>

<div id="page-content-wrapper">
    </div>

<footer class="bg-gray-900 text-white">
  <div class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <div>
        <a href="index.html" class="flex items-center mb-6">
          <span class="text-3xl font-['Pacifico'] text-white">Celestial World</span>
        </a>
        <p class="text-gray-400 mb-6">Discover and download stunning images of flowers, nature, and more for your projects.</p>
        <div class="flex space-x-4">
          <a href="https://in.pinterest.com/be_celestial/" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-primary transition-colors"><i class="ri-instagram-line"></i></a>
          <a href="https://in.pinterest.com/be_celestial/" target="_blank" rel="noopener noreferrer" aria-label="Twitter" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-primary transition-colors"><i class="ri-twitter-x-line"></i></a>
          <a href="https://in.pinterest.com/be_celestial/" target="_blank" rel="noopener noreferrer" aria-label="Pinterest" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-primary transition-colors"><i class="ri-pinterest-line"></i></a>
          <a href="https://in.pinterest.com/be_celestial/" target="_blank" rel="noopener noreferrer" aria-label="Facebook" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-primary transition-colors"><i class="ri-facebook-line"></i></a>
        </div>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-6">Quick Links</h3>
        <ul class="space-y-3">
          <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors nav-item">Home</a></li>
          <li><a href="#categories" class="text-gray-400 hover:text-white transition-colors nav-item">Categories</a></li>
          <li><a href="#gallery" class="text-gray-400 hover:text-white transition-colors nav-item">Gallery</a></li>
          <li><a href="#about" class="text-gray-400 hover:text-white transition-colors nav-item">About Us</a></li>
          <li><a href="#contact" class="text-gray-400 hover:text-white transition-colors nav-item">Contact</a></li>
        </ul>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-6">Categories</h3>
        <ul class="space-y-3">
          <li><a href="#gallery" data-filter="flowers" class="text-gray-400 hover:text-white transition-colors footer-filter-link">Flowers</a></li>
          <li><a href="#gallery" data-filter="nature" class="text-gray-400 hover:text-white transition-colors footer-filter-link">Nature</a></li>
          <li><a href="#gallery" data-filter="cute" class="text-gray-400 hover:text-white transition-colors footer-filter-link">Cute</a></li>
          <li><a href="#gallery" data-filter="artistic" class="text-gray-400 hover:text-white transition-colors footer-filter-link">Artistic</a></li>
          <li><a href="#gallery" data-filter="all" class="text-gray-400 hover:text-white transition-colors footer-filter-link">New Additions</a></li>
        </ul>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-6">Contact Us</h3>
        <ul class="space-y-3">
          <li class="flex items-start">
            <div class="w-5 h-5 flex items-center justify-center text-gray-400 mr-2 mt-1 flex-shrink-0"><i class="ri-mail-line"></i></div>
            <span class="text-gray-400 break-all">celestialworldofficial@gmail.com</span>
          </li>
        </ul>
      </div>
    </div>
    
    <!-- AD PLACEMENT 3: Banner Ad in Footer -->
    <div class="footer-ad-container mt-12 text-center">
        <div class="ad-container-banner inline-block">
          <img src="https://via.placeholder.com/728x90.png?text=Display+Ad+728x90" alt="Advertisement" class="rounded-md">
        </div>
    </div>

    <div class="border-t border-gray-800 mt-12 pt-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-gray-400 text-sm mb-4 md:mb-0">Â© 2024 Celestial World. All rights reserved.</p>
        <div class="flex items-center space-x-6">
          <li><a href="#privacy-policy" class="text-gray-400 hover:text-white text-sm nav-item">Privacy Policy</a></li>
          <li><a href="#terms-of-service" class="text-gray-400 hover:text-white text-sm nav-item">Terms of Service</a></li>
        </div>
      </div>
    </div>
  </div>
</footer>

<div class="image-modal" id="image-modal">
  <div class="max-w-4xl w-full p-4 relative bg-white rounded-lg shadow-xl m-auto" style="max-height: 90vh; overflow-y: auto;">
    <button class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center rounded-full bg-black/30 text-white hover:bg-black/50 transition-colors z-20" id="close-modal">
      <i class="ri-close-line ri-lg"></i>
    </button>
    <div class="flex flex-col md:flex-row gap-6">
        <div class="md:w-2/3 flex justify-center items-center bg-gray-100 rounded-md">
            <img id="modal-image" src="" alt="Modal Image" class="max-w-full max-h-[70vh] object-contain rounded-md">
        </div>
        <div class="md:w-1/3">
            <h3 id="modal-title" class="text-2xl font-bold text-gray-800 mb-2">Image Title</h3>
            <p id="modal-description" class="text-gray-600 mb-4 text-sm">Detailed description of the image goes here.</p>
            <div id="modal-tags" class="mb-4">
                </div>
            <div class="space-y-3">
                 <button class="modal-action-btn w-full flex items-center justify-center space-x-2 text-gray-700 hover:text-primary transition-colors bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-button" id="modal-like-btn">
                    <i class="ri-heart-line"></i>
                    <span>Like</span>
                </button>
                <button class="modal-action-btn w-full flex items-center justify-center space-x-2 text-gray-700 hover:text-primary transition-colors bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-button" onclick="showToast('Image saved to collection')">
                    <i class="ri-bookmark-line"></i>
                    <span>Save to Collection</span>
                </button>
                <button class="modal-action-btn w-full flex items-center justify-center space-x-2 text-gray-700 hover:text-primary transition-colors bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-button" onclick="showToast('Sharing options opened')">
                    <i class="ri-share-line"></i>
                    <span>Share</span>
                </button>
                <button id="modal-download-btn" class="w-full bg-primary hover:bg-primary/90 text-white py-2.5 px-6 rounded-button font-medium transition-colors !whitespace-nowrap">
                    Download Image
                </button>
            </div>
        </div>
    </div>
  </div>
</div>

<div class="toast" id="toast">
  <div class="flex items-center">
    <div class="w-6 h-6 flex items-center justify-center text-primary mr-3">
      <i class="ri-checkbox-circle-line ri-lg"></i>
    </div>
    <span id="toast-message" class="text-gray-800"></span>
  </div>
</div>

<script id="all-celestial-items-data">
// This data is used by the gallery script on the homepage
// USER: Make sure these 'src' paths match your files in the 'images' folder (CASE-SENSITIVE)
const allCelestialItems = [
  { id: 'userimg_01', src: 'images/userimg_01.jpg', title: 'Soft Pink Roses', description: 'Delicate pink roses with scattered petals.', category: 'flowers', tags: ['roses', 'pink', 'floral', 'soft'] },
  { id: 'userimg_02', src: 'images/userimg_02.jpg', title: 'Blue Hydrangeas in Rain', description: 'Vibrant blue hydrangeas glistening with raindrops.', category: 'flowers', tags: ['hydrangea', 'blue', 'rain', 'water drops'] },
  { id: 'userimg_03', src: 'images/userimg_03.jpg', title: 'Luminous Peach Flower', description: 'Close-up of a flower with glowing peach and pink petals.', category: 'flowers', tags: ['flower', 'peach', 'macro', 'luminous'] },
  { id: 'userimg_04', src: 'images/userimg_04.jpg', title: 'Dewdrops on Pink Leaves', description: 'Colorful leaves with perfectly formed dewdrops.', category: 'nature', tags: ['leaves', 'dewdrops', 'macro', 'pink'] },
  { id: 'userimg_05', src: 'images/userimg_05.jpg', title: 'Elegant Roses on Wood', description: 'A beautiful arrangement of pink and white roses on a white wooden background.', category: 'flowers', tags: ['roses', 'white', 'pink', 'wood', 'still life'] },
  { id: 'userimg_06', src: 'images/userimg_06.jpg', title: 'Spring Blossoms with Raindrops', description: 'Delicate pink spring blossoms on branches with lingering raindrops.', category: 'flowers', tags: ['spring', 'blossoms', 'pink', 'rain'] },
  { id: 'userimg_07', src: 'images/userimg_07.jpg', title: 'Blue Roses by the Window', description: 'A serene still life of blue roses and baby\'s breath in a vase by a window.', category: 'flowers', tags: ['roses', 'blue', 'still life', 'window'] },
  { id: 'userimg_08', src: 'images/userimg_08.jpg', title: 'Leaf with Dewdrops Overlooking Valley', description: 'Macro view of dewdrops on a leaf with a sunlit valley in the background.', category: 'nature', tags: ['leaf', 'dewdrops', 'landscape', 'macro', 'valley'] },
  { id: 'userimg_09', src: 'images/userimg_09.jpg', title: 'Red Autumn Leaf with Droplets', description: 'A vibrant red autumn leaf with glistening water droplets.', category: 'nature', tags: ['autumn', 'leaf', 'red', 'water drops'] },
  { id: 'userimg_10', src: 'images/userimg_10.jpg', title: 'Tropical Flowers in Glass Bowl', description: 'A colorful arrangement of tropical hibiscus flowers in a glass bowl.', category: 'flowers', tags: ['hibiscus', 'tropical', 'still life', 'colorful'] },
  { id: 'userimg_11', src: 'images/userimg_11.jpg', title: 'Lavender Field Quote', description: 'Inspirational quote "Spread your love like the scent of LAVENDER..." over a lavender field.', category: 'artistic', tags: ['quote', 'lavender', 'inspirational', 'landscape'] },
  { id: 'userimg_12', src: 'images/userimg_12.jpg', title: 'Sunny Yellow Rose Bush', description: 'A vibrant yellow rose blooming in a sunny garden.', category: 'flowers', tags: ['rose', 'yellow', 'garden', 'sunshine'] },
  { id: 'userimg_13', src: 'images/userimg_13.jpg', title: 'Palm Tree Beach Sunset', description: 'A serene beach sunset with silhouetted palm trees.', category: 'nature', tags: ['beach', 'sunset', 'palm trees', 'tropical'] },
  { id: 'userimg_14', src: 'images/userimg_14.jpg', title: 'Lotus Flowers by Rainy Window', description: 'Pink lotus flowers in a vase with a rainy window background.', category: 'flowers', tags: ['lotus', 'still life', 'rain', 'window'] },
  { id: 'userimg_15', src: 'images/userimg_15.jpg', title: 'Magical Lights in a Jar', description: 'A hand holding a jar filled with fairy lights under a crescent moon.', category: 'artistic', tags: ['lights', 'jar', 'moon', 'magical', 'fantasy'] },
  { id: 'userimg_16', src: 'images/userimg_16.jpg', title: 'Path with Falling White Petals', description: 'A wooden path covered in falling white cherry blossom petals.', category: 'flowers', tags: ['cherry blossom', 'petals', 'spring', 'path', 'white'] },
  { id: 'userimg_17', src: 'images/userimg_17.jpg', title: 'Cute Bunny with "I Love You" Sign', description: 'An adorable bunny in the snow holding a sign that says "I Love You".', category: 'cute', tags: ['bunny', 'love', 'snow', 'cute', 'winter'] },
  { id: 'userimg_18', src: 'images/userimg_18.jpg', title: 'Pink Roses on Water Surface', description: 'Artistic image of pink roses touching a rippling water surface.', category: 'flowers', tags: ['roses', 'pink', 'water', 'artistic', 'reflection'] },
  { id: 'userimg_19', src: 'images/userimg_19.jpg', title: 'Kitten in Orange Knit Pouch', description: 'A very cute kitten with blue eyes nestled in an orange knitted pouch.', category: 'cute', tags: ['kitten', 'cute', 'orange', 'knitted', 'cozy'] },
  { id: 'userimg_20', src: 'images/userimg_20.jpg', title: 'White Flowers with Diamonds', description: 'Elegant white flowers arranged with sparkling diamonds.', category: 'artistic', tags: ['flowers', 'white', 'diamonds', 'luxury', 'elegant'] },
  { id: 'userimg_21', src: 'images/userimg_21.jpg', title: 'Colorful Butterfly on Pink Flowers', description: 'A vibrant butterfly resting on bright pink bougainvillea flowers.', category: 'nature', tags: ['butterfly', 'flowers', 'pink', 'insect', 'macro'] },
  { id: 'userimg_22', src: 'images/userimg_22.jpg', title: 'Be Fearless Quote with Butterflies', description: 'Inspirational "Be Fearless" quote on a pink watercolor background with paper butterflies.', category: 'artistic', tags: ['quote', 'butterflies', 'inspirational', 'pink', 'art'] },
  { id: 'userimg_23', src: 'images/userimg_23.jpg', title: 'Deep Red Rose and Autumn Leaves', description: 'A velvety dark red rose among fallen autumn leaves on a wooden surface.', category: 'flowers', tags: ['rose', 'red', 'autumn', 'leaves', 'moody'] },
  { id: 'userimg_24', src: 'images/userimg_24.jpg', title: 'Frangipani Flowers in Bowl', description: 'White and pink frangipani (plumeria) flowers floating in a dark bowl.', category: 'flowers', tags: ['frangipani', 'plumeria', 'spa', 'still life', 'tropical'] },
  { id: 'userimg_25', src: 'images/userimg_25.jpg', title: 'Green Plant with Large Dewdrop', description: 'Macro shot of a vibrant green plant with a large central dewdrop.', category: 'nature', tags: ['plant', 'green', 'dewdrop', 'macro', 'symmetry'] },
  { id: 'userimg_26', src: 'images/userimg_26.jpg', title: 'Red Flower in Rain shower', description: 'A single red flower standing resilient in a shower of rain.', category: 'flowers', tags: ['flower', 'red', 'rain', 'nature', 'resilience'] },
  { id: 'userimg_27', src: 'images/userimg_27.jpg', title: 'Red and White Tulips Bouquet', description: 'A classic bouquet of red and white tulips in a white pitcher.', category: 'flowers', tags: ['tulips', 'red', 'white', 'bouquet', 'still life'] },
  { id: 'userimg_28', src: 'images/userimg_28.jpg', title: 'Good Things Take Time Quote', description: 'Inspirational quote "Good things take time" on a pink wooden background with baby\'s breath.', category: 'artistic', tags: ['quote', 'inspirational', 'pink', 'patience'] },
  { id: 'userimg_29', src: 'images/userimg_29.jpg', 'title': 'Pink Cherry Blossoms Close-up', 'description': 'A close-up view of delicate pink cherry blossoms.', category: 'flowers', tags: ['cherry blossom', 'pink', 'macro', 'spring'] },
  { id: 'userimg_30', src: 'images/userimg_30.jpg', title: 'Cute Bunnies on a Swing', description: 'Two adorable bunnies, one with a tiara, on a swing under cherry blossoms.', category: 'cute', tags: ['bunnies', 'cute', 'love', 'spring', 'swing'] },
  { id: 'userimg_31', src: 'images/userimg_31.jpg', title: 'Cherry Blossoms in White Vase', description: 'Elegant arrangement of pink cherry blossoms in a white pitcher.', category: 'flowers', tags: ['cherry blossom', 'pink', 'vase', 'still life'] },
  { id: 'userimg_32', src: 'images/userimg_32.jpg', title: 'Cute Teddy Bear with Blue Hat', description: 'An adorable fluffy white teddy bear character wearing a light blue beanie.', category: 'cute', tags: ['teddy bear', 'cute', 'character', 'blue'] },
  { id: 'userimg_33', src: 'images/userimg_33.jpg', title: 'Heart-Shaped Red Leaf', description: 'A red autumn leaf in the shape of a heart, covered in dewdrops.', category: 'nature', tags: ['leaf', 'heart', 'red', 'autumn', 'love', 'dewdrops'] },
  { id: 'userimg_34', src: 'images/userimg_34.jpg', title: 'Red Leaf Heart Close Up', description: 'Close-up of a heart-shaped red leaf with water droplets on a dark wooden background.', category: 'nature', tags: ['leaf', 'heart', 'red', 'autumn', 'macro'] },
  { id: 'userimg_35', src: 'images/userimg_35.jpg', title: 'Roses in Basket with Fairy Lights', description: 'A basket of pink roses surrounded by glowing heart-shaped fairy lights.', category: 'flowers', tags: ['roses', 'pink', 'basket', 'lights', 'romantic', 'love'] },
  { id: 'userimg_36', src: 'images/userimg_36.jpg', title: 'Glowing Lotus Lamp with Butterflies', description: 'A mystical scene with a glowing lotus flower lamp and ethereal butterflies.', category: 'artistic', tags: ['lotus', 'lamp', 'butterflies', 'magical', 'fantasy', 'glow'] },
  { id: 'userimg_37', src: 'images/userimg_37.jpg', title: 'Pink Tulips on Silk with Pearls', description: 'Elegant pink tulips resting on a shimmering pink silk fabric with scattered pearls.', category: 'flowers', tags: ['tulips', 'pink', 'silk', 'pearls', 'elegant', 'luxury'] },
  { id: 'userimg_38', src: 'images/userimg_38.jpg', title: 'White Rose in Green Tulle', description: 'A pristine white rose artfully enveloped in dark green tulle.', category: 'flowers', tags: ['rose', 'white', 'tulle', 'artistic', 'elegant', 'dramatic'] },
  { id: 'userimg_39', src: 'images/userimg_39.jpg', title: 'Moonlit Lotus Pond', description: 'Pink lotus flowers blooming in a pond under a full moon, with reflections.', category: 'nature', tags: ['lotus', 'moon', 'night', 'reflection', 'serene', 'magical'] },
  { id: 'userimg_40', src: 'images/userimg_40.jpg', title: 'Green Wheat with Dewdrops', description: 'Close-up of green wheat stalks with sparkling dewdrops against a dark background.', category: 'nature', tags: ['wheat', 'green', 'dewdrops', 'macro', 'agriculture'] },
  { id: 'userimg_41', src: 'images/userimg_41.jpg', title: 'Glowing Blue Dandelions', description: 'A whimsical arrangement of blue dandelion-like flowers with fairy lights in a vase.', category: 'artistic', tags: ['dandelion', 'blue', 'lights', 'magical', 'fantasy', 'glowing'] },
  { id: 'userimg_42', src: 'images/userimg_42.jpg', title: 'Romantic Roses and Candles', description: 'Red roses in a vase alongside two lit candles, creating a romantic ambiance.', category: 'flowers', tags: ['roses', 'red', 'candles', 'romantic', 'still life'] },
  { id: 'userimg_43', src: 'images/userimg_43.jpg', title: 'Lotus Blooms in Water', description: 'Beautiful pink lotus flowers and buds emerging from water with lily pads.', category: 'flowers', tags: ['lotus', 'pink', 'water', 'nature', 'serene'] },
  { id: 'userimg_44', src: 'images/userimg_44.jpg', title: 'Night Lotus Pond with Lanterns', description: 'A serene night scene of a lotus pond illuminated by glowing paper lanterns.', category: 'artistic', tags: ['lotus', 'lanterns', 'night', 'pond', 'magical', 'asian'] },
  { id: 'userimg_45', src: 'images/userimg_45.jpg', title: 'Purple Periwinkle Bouquet', description: 'A charming bouquet of purple periwinkle (vinca) flowers in a glass vase.', category: 'flowers', tags: ['periwinkle', 'vinca', 'purple', 'bouquet', 'still life'] },
  { id: 'userimg_46', src: 'images/userimg_46.jpg', title: 'Zen Spa with Pink Flowers', description: 'Pink frangipani flowers and smooth spa stones on a turquoise surface with water drops.', category: 'flowers', tags: ['frangipani', 'spa', 'zen', 'pink', 'stones', 'wellness'] },
  { id: 'userimg_47', src: 'images/userimg_47.jpg', title: 'Cute Bunny Tasting Snowflake', description: 'An adorable white bunny with its tongue out, seemingly trying to catch a falling snowflake.', category: 'cute', tags: ['bunny', 'cute', 'snow', 'winter', 'snowflake'] },
  { id: 'userimg_48', src: 'images/userimg_48.jpg', title: 'Sky Lanterns at Night', description: 'Numerous glowing sky lanterns floating in a dark night sky with a crescent moon.', category: 'artistic', tags: ['sky lanterns', 'night', 'moon', 'festival', 'magical'] }
];
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const pageContentWrapper = document.getElementById('page-content-wrapper');
    const body = document.body;

    const bannerAdTemplate = `
        <div class="content-ad-container container mx-auto py-12 px-4">
            <div class="ad-container-banner text-center">
              <img src="https://via.placeholder.com/728x90.png?text=Display+Ad+728x90" alt="Advertisement" class="rounded-md inline-block">
            </div>
        </div>
    `;

    // --- Page Content Templates ---
    const pageTemplates = {
        home: `
            <div class="relative bg-gray-900 text-white h-[600px] flex items-center justify-center overflow-hidden">
              <div class="absolute inset-0 z-0">
                  <img src="images/hero-background.jpg" alt="Abstract purple background" class="w-full h-full object-cover opacity-30">
                  <div class="hero-particles"></div>
              </div>
              <div class="relative z-10 text-center px-4">
                  <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">Find Your Inspiration</h1>
                  <p class="text-lg md:text-xl text-gray-300 mb-8 max-w-2xl mx-auto">High-quality, artistic images for personal and commercial use. Free to download.</p>
                  <div class="flex justify-center">
                      <a href="#gallery" class="bg-primary hover:bg-secondary text-white font-semibold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105">
                          Explore Gallery
                      </a>
                  </div>
              </div>
            </div>

            <section id="categories" class="py-16 bg-white">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-10">Browse Categories</h2>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <a href="#gallery" data-filter="flowers" class="category-card relative rounded-lg overflow-hidden group">
                            <img src="images/category-flowers.jpg" alt="Flowers" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                                <h3 class="text-white text-xl font-semibold">Flowers</h3>
                            </div>
                        </a>
                        <a href="#gallery" data-filter="nature" class="category-card relative rounded-lg overflow-hidden group">
                            <img src="images/category-nature.jpg" alt="Nature" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                                <h3 class="text-white text-xl font-semibold">Nature</h3>
                            </div>
                        </a>
                        <a href="#gallery" data-filter="cute" class="category-card relative rounded-lg overflow-hidden group">
                            <img src="images/category-cute.jpg" alt="Cute" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                                <h3 class="text-white text-xl font-semibold">Cute</h3>
                            </div>
                        </a>
                        <a href="#gallery" data-filter="artistic" class="category-card relative rounded-lg overflow-hidden group">
                            <img src="images/category-artistic.jpg" alt="Artistic" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                                <h3 class="text-white text-xl font-semibold">Artistic</h3>
                            </div>
                        </a>
                    </div>
                </div>
            </section>

            <section id="gallery" class="py-16 bg-gray-50">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-4">Gallery</h2>
                    <div id="gallery-filters" class="flex justify-center space-x-2 md:space-x-4 mb-10 flex-wrap">
                        <button data-filter="all" class="filter-btn active font-medium text-gray-700 hover:text-primary py-2 px-4 rounded-full transition-colors">All</button>
                        <button data-filter="flowers" class="filter-btn font-medium text-gray-700 hover:text-primary py-2 px-4 rounded-full transition-colors">Flowers</button>
                        <button data-filter="nature" class="filter-btn font-medium text-gray-700 hover:text-primary py-2 px-4 rounded-full transition-colors">Nature</button>
                        <button data-filter="cute" class="filter-btn font-medium text-gray-700 hover:text-primary py-2 px-4 rounded-full transition-colors">Cute</button>
                        <button data-filter="artistic" class="filter-btn font-medium text-gray-700 hover:text-primary py-2 px-4 rounded-full transition-colors">Artistic</button>
                    </div>
                    <div id="masonry-gallery-container" class="masonry-grid">
                        </div>
                </div>
            </section>
        `,
        about: `
            <main id="about" class="py-16 md:py-24 bg-white">
                <div class="container mx-auto px-4">
                    <div class="max-w-4xl mx-auto text-center">
                        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">About Celestial World</h1>
                        <p class="text-lg text-gray-600 mb-12">Our mission is to provide a universe of stunning, high-quality images that inspire creativity and bring your projects to life.</p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-12 items-center">
                        <div>
                            <img src="images/about-us-image.jpg" alt="Team working" class="rounded-xl shadow-lg w-full">
                        </div>
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">Who We Are</h2>
                            <p class="text-gray-600 mb-4">Celestial World started as a passion project by a small group of photographers and artists who wanted to share their work with the world. We believe that beautiful imagery should be accessible to everyone, from students and bloggers to professional designers and businesses.</p>
                            <p class="text-gray-600">Every photo in our collection is carefully curated to ensure it meets our high standards of quality and artistic value. We specialize in capturing the beauty of nature, the elegance of flowers, the charm of cute moments, and the depth of artistic expression.</p>
                        </div>
                    </div>
                </div>
                ${bannerAdTemplate}
            </main>
        `,
        contact: `
            <main id="contact" class="bg-gray-50">
                <div class="container mx-auto px-4 py-16 md:py-24">
                    <div class="max-w-3xl mx-auto text-center">
                        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">Get In Touch</h1>
                        <p class="text-lg text-gray-600 mb-12">We'd love to hear from you! Whether you have a question, feedback, or just want to say hello, feel free to reach out.</p>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-8 md:p-12 max-w-4xl mx-auto">
                        <form action="#" method="POST" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="first-name" class="block text-sm font-medium text-gray-700">First Name</label>
                                    <input type="text" name="first-name" id="first-name" autocomplete="given-name" class="mt-1 block w-full rounded-button border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                                </div>
                                <div>
                                    <label for="last-name" class="block text-sm font-medium text-gray-700">Last Name</label>
                                    <input type="text" name="last-name" id="last-name" autocomplete="family-name" class="mt-1 block w-full rounded-button border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                                </div>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" name="email" id="email" autocomplete="email" class="mt-1 block w-full rounded-button border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                                <textarea id="message" name="message" rows="4" class="mt-1 block w-full rounded-button border-gray-300 shadow-sm focus:border-primary focus:ring-primary"></textarea>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="bg-primary hover:bg-secondary text-white font-semibold py-3 px-8 rounded-full transition-all duration-300">
                                    Send Message
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                ${bannerAdTemplate}
            </main>
        `,
        'privacy-policy': `
            <main id="privacy-policy" class="py-16 md:py-24 bg-white">
                <div class="container mx-auto px-4 prose lg:prose-xl max-w-4xl">
                    <h1>Privacy Policy</h1>
                    <p>Your privacy is important to us. It is Celestial World's policy to respect your privacy regarding any information we may collect from you across our website...</p>
                    <h2>1. Information we collect</h2>
                    <p>Log data, cookies, etc...</p>
                    <h2>2. Use of information</h2>
                    <p>We use the information we collect to operate and maintain our website...</p>
                </div>
                ${bannerAdTemplate}
            </main>
        `,
        'terms-of-service': `
            <main id="terms-of-service" class="py-16 md:py-24 bg-white">
                <div class="container mx-auto px-4 prose lg:prose-xl max-w-4xl">
                    <h1>Terms of Service</h1>
                    <p>By accessing the website at Celestial World, you are agreeing to be bound by these terms of service, all applicable laws and regulations...</p>
                    <h2>1. Use License</h2>
                    <p>Permission is granted to temporarily download one copy of the materials (information or software) on Celestial World's website for personal, non-commercial transitory viewing only...</p>
                </div>
                ${bannerAdTemplate}
            </main>
        `
    };

    // --- Core Navigation and Page Loading Logic ---
    function loadPage(pageName, filter = 'all') {
        const pageId = pageName.startsWith('#') ? pageName.substring(1) : (pageName === 'index.html' ? 'home' : pageName);
        const content = pageTemplates[pageId] || pageTemplates.home;

        pageContentWrapper.innerHTML = content;
        body.setAttribute('data-page', pageId);
        window.scrollTo(0, 0);

        if (pageId === 'home') {
            setupHomepageScripts(filter);
        } else {
            // Setup scripts for other pages if any
        }
        updateHeaderStyle(pageId);
        setActiveNavLink(pageId);
    }

    function getPageFromHash() {
        return window.location.hash || 'home';
    }

    function setupHomepageScripts(initialFilter) {
        // Particles for hero section
        const particlesContainer = document.querySelector('.hero-particles');
        if (particlesContainer) {
            for (let i = 0; i < 30; i++) {
                let particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = particle.style.height = `${Math.random() * 3 + 1}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 8}s`;
                particlesContainer.appendChild(particle);
            }
        }
        // Gallery setup
        populateGallery(initialFilter);
        setupGalleryFilters();
        setupCategoryLinks();
    }

    // --- Gallery Logic ---
    function populateGallery(filter) {
        const galleryContainer = document.getElementById('masonry-gallery-container');
        if (!galleryContainer) return;

        galleryContainer.innerHTML = '';
        const filteredItems = filter === 'all' ? allCelestialItems : allCelestialItems.filter(item => item.category === filter);

        const inFeedAdTemplate = `
            <div class="gallery-ad-item p-4">
                <div class="ad-container-in-feed" style="text-align:center;">
                  <img src="https://via.placeholder.com/300x250.png?text=In-Feed+Ad+300x250" alt="Advertisement" class="rounded-md">
                </div>
            </div>
        `;

        let galleryHtml = '';
        for (let i = 0; i < filteredItems.length; i++) {
            const item = filteredItems[i];
            galleryHtml += `
                <div class="gallery-item relative rounded-lg overflow-hidden group cursor-pointer" data-id="${item.id}">
                    <img src="${item.src}" alt="${item.title}" class="w-full h-auto object-cover block">
                    <div class="gallery-overlay absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4">
                        <h4 class="text-white font-semibold text-lg">${item.title}</h4>
                        <p class="text-gray-300 text-sm">${item.description}</p>
                    </div>
                </div>`;
            
            // AD PLACEMENT 1: Inject In-Feed Ad after every 12th image
            if ((i + 1) % 12 === 0) {
                galleryHtml += inFeedAdTemplate;
            }
        }
        galleryContainer.innerHTML = galleryHtml;


        // Add click listeners for modal
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', () => openImageModal(item.dataset.id));
        });
    }

    function setupGalleryFilters() {
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active', 'bg-primary/10', 'text-primary'));
                button.classList.add('active', 'bg-primary/10', 'text-primary');
                populateGallery(button.dataset.filter);
            });
        });
    }

    function setupCategoryLinks() {
        // For homepage category cards
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', (e) => {
                e.preventDefault();
                const filter = card.dataset.filter;
                document.querySelector(`button.filter-btn[data-filter="${filter}"]`).click();
                document.getElementById('gallery').scrollIntoView({ behavior: 'smooth' });
            });
        });

        // For footer filter links
        document.querySelectorAll('.footer-filter-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const filter = link.dataset.filter;
                loadPage('home', filter); // Reload home page with filter
                setTimeout(() => {
                  const gallerySection = document.getElementById('gallery');
                  if (gallerySection) {
                    document.querySelector(`button.filter-btn[data-filter="${filter}"]`).click();
                    gallerySection.scrollIntoView({ behavior: 'smooth' });
                  }
                }, 100); // Small delay to ensure content is loaded
            });
        });
    }

    // --- Image Modal Logic ---
    const modal = document.getElementById('image-modal');
    function openImageModal(itemId) {
        const item = allCelestialItems.find(i => i.id === itemId);
        if (!item) return;

        document.getElementById('modal-image').src = item.src;
        document.getElementById('modal-title').innerText = item.title;
        document.getElementById('modal-description').innerText = item.description;
        
        const tagsContainer = document.getElementById('modal-tags');
        tagsContainer.innerHTML = item.tags.map(tag => `<span class="inline-block bg-gray-200 text-gray-700 text-xs font-semibold mr-2 px-2.5 py-1 rounded-full">#${tag}</span>`).join(' ');

        const downloadBtn = document.getElementById('modal-download-btn');
        downloadBtn.onclick = () => {
            const link = document.createElement('a');
            link.href = item.src;
            link.download = item.title.replace(/\s+/g, '_') + '.jpg';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showToast('Download started!');
        };
        
        modal.classList.add('flex');
    }
    document.getElementById('close-modal').addEventListener('click', () => modal.classList.remove('flex'));
    modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('flex'); });

    // --- Header and UI Logic ---
    const header = document.getElementById('site-header');
    const headerBgOverlay = document.getElementById('header-bg-overlay-dynamic');

    function updateHeaderStyle(pageId) {
        header.classList.remove('glassmorphism-light', 'glassmorphism-dark', 'header-bg-dark-scrolled');
        headerBgOverlay.style.backgroundImage = '';
        headerBgOverlay.style.opacity = '0';

        if (pageId === 'home') {
            header.classList.add('glassmorphism-light');
            window.onscroll = () => {
                if (window.scrollY > 50) {
                    header.classList.add('header-bg-dark-scrolled');
                    header.classList.remove('glassmorphism-light');
                } else {
                    header.classList.remove('header-bg-dark-scrolled');
                    header.classList.add('glassmorphism-light');
                }
            };
        } else {
            header.classList.add('glassmorphism-dark');
            headerBgOverlay.style.backgroundImage = `url('images/contact-header-bg.jpg')`;
            headerBgOverlay.style.opacity = '1';
            window.onscroll = null; // Remove scroll listener for non-home pages
        }
    }
    
    function setActiveNavLink(pageId) {
        document.querySelectorAll('.nav-item').forEach(link => {
            const linkPage = (link.getAttribute('href') === 'index.html' || link.getAttribute('href') === '#') ? 'home' : link.getAttribute('href').substring(1);
            if (linkPage === pageId || (pageId === 'home' && (linkPage === 'categories' || linkPage === 'gallery'))) {
                link.classList.add('nav-link-active');
            } else {
                link.classList.remove('nav-link-active');
            }
        });
    }

    // Mobile menu toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // --- Event Listeners for Navigation ---
    document.body.addEventListener('click', function(e) {
        // Handle clicks on internal nav links
        if (e.target.matches('.nav-item')) {
            e.preventDefault();
            const href = e.target.getAttribute('href');
            const pageId = (href === 'index.html' || href === '#') ? 'home' : href.substring(1);
            
            // If on a different page, load the homepage first then scroll
            if (body.getAttribute('data-page') !== 'home' && (pageId === 'categories' || pageId === 'gallery')) {
                loadPage('home');
                 setTimeout(() => {
                    const section = document.getElementById(pageId);
                    if(section) section.scrollIntoView({ behavior: 'smooth' });
                 }, 100);
            } else if (pageId === 'home') {
                loadPage(pageId);
            } else if (pageTemplates[pageId]) {
                loadPage(pageId);
            } else { // For sections on the homepage
                const section = document.getElementById(pageId);
                if(section) section.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Close mobile menu after click
            if (!mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }
        }
    });

    // --- CORRECTED: Search functionality ---
    function performSearch() {
        // This is a dummy search. In a real app, this would query a database or API.
        const queryDesktop = document.getElementById('search-input-desktop').value.trim();
        const queryMobile = document.getElementById('search-input-mobile').value.trim();
        const query = queryDesktop || queryMobile;
        
        if (query) {
            showToast(`Searching for: "${query}"`);
            // Here you would filter 'allCelestialItems' and repopulate the gallery
            const searchResults = allCelestialItems.filter(item => 
                item.title.toLowerCase().includes(query.toLowerCase()) || 
                item.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase()))
            );
            
            // To display results, we can reuse the gallery population logic
            const galleryContainer = document.getElementById('masonry-gallery-container');
            if (galleryContainer) {
                // First, ensure we are on the gallery view
                const gallerySection = document.getElementById('gallery');
                if (gallerySection) gallerySection.scrollIntoView({ behavior: 'smooth' });

                galleryContainer.innerHTML = ''; // Clear current gallery
                if(searchResults.length > 0) {
                    let searchHtml = '';
                    searchResults.forEach(item => {
                        searchHtml += `
                            <div class="gallery-item relative rounded-lg overflow-hidden group cursor-pointer" data-id="${item.id}">
                                <img src="${item.src}" alt="${item.title}" class="w-full h-auto object-cover block">
                                <div class="gallery-overlay absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4">
                                    <h4 class="text-white font-semibold text-lg">${item.title}</h4>
                                    <p class="text-gray-300 text-sm">${item.description}</p>
                                </div>
                            </div>`;
                    });
                    galleryContainer.innerHTML = searchHtml;
                    document.querySelectorAll('.gallery-item').forEach(item => {
                        item.addEventListener('click', () => openImageModal(item.dataset.id));
                    });
                } else {
                    galleryContainer.innerHTML = `<p class="text-center text-gray-500 col-span-full">No results found for "${query}".</p>`;
                }
            } else {
                // If not on the homepage, load it first then search
                loadPage('home');
                setTimeout(performSearch, 200); // Retry search after page load
            }
        }
    }
    document.getElementById('search-input-desktop').addEventListener('keydown', e => { if (e.key === 'Enter') performSearch(); });
    document.getElementById('search-input-mobile').addEventListener('keydown', e => { if (e.key === 'Enter') performSearch(); });

    // --- CORRECTED: Like button functionality ---
    function handleLikeClick(e) {
        e.preventDefault();
        const icon = e.currentTarget.querySelector('i');
        icon.classList.toggle('ri-heart-line');
        icon.classList.toggle('ri-heart-fill');
        icon.classList.toggle('text-red-500');
        if (icon.classList.contains('ri-heart-fill')) {
            showToast('Added to favorites!');
        } else {
            showToast('Removed from favorites.');
        }
    }
    document.getElementById('header-like-button').addEventListener('click', handleLikeClick);
    document.getElementById('mobile-like-button').addEventListener('click', handleLikeClick);
    document.getElementById('modal-like-btn').addEventListener('click', handleLikeClick);
    
    // --- Toast notification ---
    window.showToast = function(message) {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        toastMessage.innerText = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }

    // --- Custom cursor ---
    const cursor = document.querySelector('.custom-cursor');
    if (cursor) {
        window.addEventListener('mousemove', e => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        document.querySelectorAll('a, button, input, .gallery-item, .category-card, .custom-switch').forEach(el => {
            el.addEventListener('mouseover', () => cursor.classList.add('active'));
            el.addEventListener('mouseout', () => cursor.classList.remove('active'));
        });
    }

    // Initial page load
    loadPage(getPageFromHash());

});
</script>

</body>
</html>
